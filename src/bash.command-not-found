print_message () {

    local message
    message="\033[48;5;235m\033[38;5;236m▄\033[48;5;236m   \033[48;5;237m   \033[48;5;240m\033[38;5;237m▄\033[48;5;237m\033[38;5;236m▄  \033[48;5;240m\033[38;5;237m▄\033[48;5;237m\033[38;5;236m▄\033[48;5;236m     \033[48;5;237m▄\033[48;5;180m\033[38;5;186m▄\033[48;5;144m \033[48;5;137m\033[38;5;143m▄\033[48;5;143m  \033[48;5;101m\033[38;5;137m▄\033[48;5;94m\033[38;5;101m▄\033[48;5;101m \033[48;5;59m▄\033[48;5;65m▄\033[48;5;245m\033[38;5;109m▄\033[48;5;145m\033[38;5;243m▄\033[48;5;109m \033[49m
\033[48;5;236m  \033[48;5;240m     \033[48;5;236m  \033[38;5;235m▄▄▄▄▄▄\033[48;5;235m  \033[38;5;234m▄ \033[48;5;186m\033[38;5;187m▄\033[48;5;144m \033[48;5;180m▄\033[48;5;137m \033[48;5;144m\033[38;5;180m▄ \033[48;5;101m \033[48;5;240m\033[38;5;95m▄\033[48;5;101m\033[38;5;107m▄ \033[48;5;152m\033[38;5;159m▄\033[48;5;244m\033[38;5;102m▄\033[48;5;109m\033[38;5;152m▄\033[49m
\033[48;5;235m\033[38;5;236m▄\033[48;5;236m \033[48;5;240m\033[38;5;235m▄▄\033[38;5;236m▄\033[48;5;236m\033[38;5;234m▄\033[48;5;235m \033[48;5;236m▄\033[48;5;235m\033[38;5;232m▄\033[38;5;233m▄\033[38;5;234m▄\033[48;5;234m\033[38;5;233m▄\033[48;5;235m▄\033[48;5;234m▄\033[48;5;235m\033[38;5;234m▄\033[48;5;234m\033[38;5;233m▄   \033[48;5;187m\033[38;5;234m▄  \033[48;5;137m\033[38;5;144m▄\033[48;5;180m \033[48;5;144m\033[38;5;180m▄\033[48;5;137m \033[48;5;101m \033[48;5;108m\033[38;5;144m▄\033[48;5;101m \033[48;5;159m \033[48;5;108m \033[48;5;152m \033[49m
\033[48;5;235m  \033[48;5;236m\033[38;5;235m▄▄\033[48;5;235m  \033[48;5;232m \033[48;5;233m\033[38;5;232m▄\033[48;5;232m\033[38;5;95m▄\033[48;5;233m\033[38;5;137m▄\033[48;5;238m▄\033[48;5;95m▄▄\033[48;5;232m▄\033[48;5;233m▄\033[48;5;234m\033[38;5;232m▄\033[48;5;233m ▄  \033[48;5;187m\033[38;5;253m▄\033[48;5;181m\033[38;5;144m▄\033[48;5;180m\033[38;5;187m▄\033[48;5;144m\033[38;5;143m▄ \033[48;5;101m\033[38;5;137m▄\033[48;5;137m\033[38;5;101m▄\033[48;5;144m \033[48;5;101m\033[38;5;102m▄\033[48;5;159m\033[38;5;152m▄\033[48;5;108m \033[48;5;152m\033[38;5;109m▄\033[49m
\033[48;5;235m\033[38;5;236m▄▄\033[48;5;236m\033[38;5;235m▄\033[48;5;235m \033[38;5;232m▄\033[48;5;234m \033[48;5;233m\033[38;5;237m▄\033[38;5;138m▄\033[48;5;137m\033[38;5;144m▄▄\033[48;5;174m\033[38;5;138m▄\033[48;5;180m\033[38;5;137m▄\033[48;5;173m▄ \033[48;5;137m  \033[48;5;233m\033[38;5;232m▄   \033[48;5;188m\033[38;5;187m▄\033[48;5;144m \033[48;5;187m \033[48;5;137m \033[48;5;180m \033[48;5;144m \033[48;5;101m \033[48;5;144m \033[48;5;108m \033[48;5;152m \033[48;5;109m \033[48;5;108m \033[49m
\033[48;5;236m \033[38;5;235m▄\033[48;5;233m\033[38;5;236m▄\033[48;5;235m ▄ \033[48;5;236m\033[38;5;237m▄\033[48;5;138m\033[38;5;144m▄\033[48;5;180m \033[38;5;137m▄\033[38;5;95m▄\033[38;5;239m▄\033[38;5;240m▄\033[48;5;173m \033[38;5;180m▄\033[48;5;137m  \033[48;5;234m \033[48;5;233m \033[38;5;232m▄\033[48;5;249m▄\033[48;5;187m \033[48;5;144m \033[38;5;180m▄\033[48;5;180m\033[38;5;144m▄\033[48;5;144m\033[38;5;180m▄\033[48;5;101m  \033[48;5;247m\033[38;5;248m▄\033[48;5;109m \033[38;5;151m▄\033[48;5;108m \033[49m
\033[48;5;236m   \033[48;5;235m\033[38;5;236m▄\033[48;5;237m\033[38;5;238m▄\033[48;5;236m\033[38;5;234m▄\033[48;5;235m \033[48;5;180m \033[48;5;144m\033[38;5;137m▄\033[48;5;137m \033[48;5;240m\033[38;5;95m▄\033[48;5;94m▄\033[48;5;131m\033[38;5;137m▄\033[48;5;173m\033[38;5;138m▄\033[48;5;137m \033[38;5;239m▄\033[48;5;95m \033[48;5;233m  \033[48;5;232m  \033[48;5;187m \033[48;5;144m \033[48;5;187m \033[48;5;144m\033[38;5;137m▄\033[48;5;180m \033[48;5;137m \033[48;5;101m\033[38;5;59m▄\033[48;5;248m\033[38;5;145m▄\033[48;5;109m \033[48;5;152m \033[48;5;109m \033[49m
\033[48;5;236m  \033[48;5;235m\033[38;5;236m▄ \033[38;5;95m▄\033[48;5;239m▄\033[48;5;95m\033[38;5;239m▄\033[48;5;144m \033[48;5;180m  \033[38;5;137m▄\033[48;5;137m\033[38;5;180m▄\033[48;5;180m \033[38;5;137m▄\033[48;5;174m\033[38;5;138m▄\033[48;5;131m\033[38;5;137m▄\033[48;5;95m▄\033[48;5;233m  \033[48;5;232m  \033[48;5;187m \033[48;5;144m \033[48;5;187m \033[48;5;137m\033[38;5;144m▄\033[48;5;180m\033[38;5;187m▄\033[48;5;137m \033[48;5;240m\033[38;5;101m▄\033[48;5;145m\033[38;5;248m▄\033[48;5;109m \033[48;5;159m \033[48;5;109m \033[49m
\033[48;5;236m   \033[48;5;235m\033[38;5;234m▄\033[48;5;95m▄\033[48;5;138m\033[38;5;180m▄\033[48;5;237m\033[38;5;137m▄\033[48;5;144m\033[38;5;138m▄\033[48;5;180m \033[38;5;174m▄ ▄\033[48;5;173m\033[38;5;138m▄\033[48;5;240m\033[38;5;137m▄\033[48;5;131m▄\033[48;5;217m\033[38;5;95m▄\033[48;5;137m\033[38;5;232m▄\033[48;5;233m  \033[48;5;232m \033[48;5;233m▄\033[48;5;144m\033[38;5;233m▄\033[48;5;187m \033[48;5;144m \033[38;5;187m▄\033[48;5;180m\033[38;5;144m▄\033[48;5;137m\033[38;5;101m▄\033[48;5;101m \033[48;5;248m \033[48;5;108m \033[48;5;159m \033[48;5;109m \033[49m
\033[48;5;236m   \033[48;5;235m\033[38;5;237m▄\033[48;5;234m \033[48;5;233m\033[38;5;234m▄\033[48;5;137m \033[48;5;101m\033[38;5;95m▄\033[48;5;137m \033[48;5;138m\033[38;5;137m▄\033[48;5;174m\033[38;5;144m▄\033[48;5;137m\033[38;5;95m▄▄\033[48;5;174m\033[38;5;131m▄\033[48;5;137m▄\033[48;5;101m\033[38;5;137m▄\033[48;5;232m \033[48;5;233m  \033[48;5;232m\033[38;5;233m▄\033[48;5;233m  \033[48;5;187m \033[48;5;144m \033[48;5;187m \033[48;5;143m\033[38;5;137m▄\033[38;5;144m▄\033[48;5;101m \033[48;5;248m\033[38;5;247m▄\033[48;5;108m \033[48;5;159m \033[48;5;109m \033[49m
\033[48;5;240m \033[48;5;237m\033[38;5;240m▄ \033[48;5;235m\033[38;5;234m▄\033[48;5;233m▄\033[48;5;236m\033[38;5;95m▄\033[48;5;137m\033[38;5;101m▄\033[48;5;101m \033[38;5;95m▄\033[48;5;144m\033[38;5;15mq\033[48;5;137mui\033[48;5;179men\033[38;5;137m\033[48;5;173m▄\033[48;5;238m\033[38;5;15mc\033[48;5;232mh\033[48;5;233mota s\033[48;5;187m\033[38;5;238mo\033[48;5;144ms\033[48;5;251m\033[38;5;15m \033[48;5;101m\033[38;5;231m \033[48;5;144m \033[48;5;101m \033[48;5;247m\033[38;5;108m▄\033[48;5;108m \033[48;5;159m \033[48;5;109m \033[49m
\033[38;5;240m▀\033[38;5;236m▀▀\033[38;5;235m▀▀\033[38;5;95m▀▀▀\033[38;5;101m▀\033[38;5;95m▀▀\033[38;5;138m▀\033[38;5;137m▀▀\033[38;5;95m▀\033[38;5;236m▀▀\033[38;5;233m▀▀\033[38;5;234m▀▀\033[38;5;233m▀\033[38;5;187m▀\033[38;5;246m▀\033[38;5;145m▀\033[38;5;246m▀\033[38;5;101m▀▀\033[38;5;246m▀\033[38;5;108m▀\033[38;5;159m▀\033[38;5;109m▀\033[39m"
    
    # Print selected message.
    printf "\\n%b\\n\\n" "$(tput bold)$(tput setaf 1)$message$(tput sgr0)" >&2
}

function_exists () {
    # Zsh returns 0 even on non existing functions with -F so use -f
    declare -f $1 > /dev/null
    return $?
}

#
# The idea below is to copy any existing handlers to another function
# name and insert the message in front of the old handler in the
# new handler. By default, neither bash or zsh has has a handler function
# defined, so the default behaviour is replicated.
#
# Also, ensure the handler is only copied once. If we do not ensure this
# the handler would add itself recursively if this file happens to be
# sourced multiple times in the same shell, resulting in a neverending
# stream of messages.
#

#
# Zsh
#
if function_exists command_not_found_handler; then
    if ! function_exists orig_command_not_found_handler; then
        eval "orig_$(declare -f command_not_found_handler)"
    fi
else
    orig_command_not_found_handler () {
        printf "zsh: command not found: %s\\n" "$1" >&2
        return 127
    }
fi

command_not_found_handler () {
    print_message
    orig_command_not_found_handler "$@"
}


#
# Bash
#
if function_exists command_not_found_handle; then
    if ! function_exists orig_command_not_found_handle; then
        eval "orig_$(declare -f command_not_found_handle)"
    fi
else
    orig_command_not_found_handle () {
        printf "%s: %s: command not found\\n" "$0" "$1" >&2
        return 127
    }
fi

command_not_found_handle () {
    print_message
    orig_command_not_found_handle "$@"
}
